<?php
/**
 * Plugin Name: Change Language Attribute
 * Plugin URI:  https://example.com/change-language-attribute
 * Description: Changes the language attribute in the <html> tag to 'ru'.
 * Version:     1.1.0
 * Author:      Your Name
 * Author URI:  https://example.com
 * License:     GPL2
 * License URI: https://www.gnu.org/licenses/gpl-2.0.html
 */

function change_language_attribute( $output ) {
    // Проверяем, есть ли атрибут lang
    if (strpos($output, 'lang=') !== false) {
        // Заменяем существующий атрибут lang
        $output = preg_replace('/lang="[^"]+"/', 'lang="ru"', $output);
    } else {
        // Добавляем атрибут lang, если его нет
        $output .= ' lang="ru"';
    }
    return $output;
}
add_filter( 'language_attributes', 'change_language_attribute' );
